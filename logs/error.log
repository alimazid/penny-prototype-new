{"code":"ENOTFOUND","config":{"headers":{"Accept-Encoding":"gzip","Authorization":"<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.","User-Agent":"google-api-nodejs-client/7.2.0 (gzip)","x-goog-api-client":"gdcl/7.2.0 gl-node/24.6.0"},"method":"GET","params":{"maxResults":15,"q":"after:2025/08/19"},"responseType":"unknown","retry":true,"retryConfig":{"currentRetryAttempt":2,"httpMethodsToRetry":["GET","HEAD","PUT","OPTIONS","DELETE"],"maxRetryDelay":9007199254740991,"noResponseRetries":2,"retry":3,"retryDelayMultiplier":2,"statusCodesToRetry":[[100,199],[408,408],[429,429],[500,599]],"timeOfFirstRequest":1755730695897,"totalTimeout":9007199254740991},"url":"https://gmail.googleapis.com/gmail/v1/users/me/messages?q=after%3A2025%2F08%2F19&maxResults=15","userAgentDirectives":[{"comment":"gzip","product":"google-api-nodejs-client","version":"7.2.0"}]},"error":{"code":"ENOTFOUND","errno":"ENOTFOUND","message":"request to https://gmail.googleapis.com/gmail/v1/users/me/messages?q=after%3A2025%2F08%2F19&maxResults=15 failed, reason: getaddrinfo ENOTFOUND gmail.googleapis.com","type":"system"},"level":"error","message":"Error listing recent emails: request to https://gmail.googleapis.com/gmail/v1/users/me/messages?q=after%3A2025%2F08%2F19&maxResults=15 failed, reason: getaddrinfo ENOTFOUND gmail.googleapis.com","stack":"Error: request to https://gmail.googleapis.com/gmail/v1/users/me/messages?q=after%3A2025%2F08%2F19&maxResults=15 failed, reason: getaddrinfo ENOTFOUND gmail.googleapis.com\n    at Gaxios._request (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/gaxios@6.7.1/node_modules/gaxios/src/gaxios.ts:157:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async OAuth2Client.requestAsync (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/google-auth-library@9.15.1/node_modules/google-auth-library/build/src/auth/oauth2client.js:429:18)\n    at async GmailService.listRecentEmails (/Users/alimazid/Claude/Penny/prototype-clean/src/services/gmailService.ts:193:24)\n    at async EmailMonitoringService.fallbackEmailCheck (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:272:28)\n    at async EmailMonitoringService.checkForNewEmails (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:259:9)\n    at async Timeout._onTimeout (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:83:9)","timestamp":"2025-08-20T22:58:16.524Z"}
{"level":"error","message":"Error in fallback email check: Failed to list recent emails","stack":"Error: Failed to list recent emails\n    at GmailService.listRecentEmails (/Users/alimazid/Claude/Penny/prototype-clean/src/services/gmailService.ts:212:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async EmailMonitoringService.fallbackEmailCheck (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:272:28)\n    at async EmailMonitoringService.checkForNewEmails (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:259:9)\n    at async Timeout._onTimeout (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:83:9)","timestamp":"2025-08-20T22:58:16.525Z"}
{"code":"ENOTFOUND","config":{"headers":{"Accept-Encoding":"gzip","Authorization":"<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.","User-Agent":"google-api-nodejs-client/7.2.0 (gzip)","x-goog-api-client":"gdcl/7.2.0 gl-node/24.6.0"},"method":"GET","params":{"maxResults":15,"q":"after:2025/08/19"},"responseType":"unknown","retry":true,"retryConfig":{"currentRetryAttempt":2,"httpMethodsToRetry":["GET","HEAD","PUT","OPTIONS","DELETE"],"maxRetryDelay":9007199254740991,"noResponseRetries":2,"retry":3,"retryDelayMultiplier":2,"statusCodesToRetry":[[100,199],[408,408],[429,429],[500,599]],"timeOfFirstRequest":1755730753476,"totalTimeout":9007199254740991},"url":"https://gmail.googleapis.com/gmail/v1/users/me/messages?q=after%3A2025%2F08%2F19&maxResults=15","userAgentDirectives":[{"comment":"gzip","product":"google-api-nodejs-client","version":"7.2.0"}]},"error":{"code":"ENOTFOUND","errno":"ENOTFOUND","message":"request to https://gmail.googleapis.com/gmail/v1/users/me/messages?q=after%3A2025%2F08%2F19&maxResults=15 failed, reason: getaddrinfo ENOTFOUND gmail.googleapis.com","type":"system"},"level":"error","message":"Error listing recent emails: request to https://gmail.googleapis.com/gmail/v1/users/me/messages?q=after%3A2025%2F08%2F19&maxResults=15 failed, reason: getaddrinfo ENOTFOUND gmail.googleapis.com","stack":"Error: request to https://gmail.googleapis.com/gmail/v1/users/me/messages?q=after%3A2025%2F08%2F19&maxResults=15 failed, reason: getaddrinfo ENOTFOUND gmail.googleapis.com\n    at Gaxios._request (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/gaxios@6.7.1/node_modules/gaxios/src/gaxios.ts:157:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async OAuth2Client.requestAsync (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/google-auth-library@9.15.1/node_modules/google-auth-library/build/src/auth/oauth2client.js:429:18)\n    at async GmailService.listRecentEmails (/Users/alimazid/Claude/Penny/prototype-clean/src/services/gmailService.ts:193:24)\n    at async EmailMonitoringService.fallbackEmailCheck (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:272:28)\n    at async EmailMonitoringService.checkForNewEmails (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:259:9)\n    at async Timeout._onTimeout (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:83:9)","timestamp":"2025-08-20T22:59:14.093Z"}
{"level":"error","message":"Error in fallback email check: Failed to list recent emails","stack":"Error: Failed to list recent emails\n    at GmailService.listRecentEmails (/Users/alimazid/Claude/Penny/prototype-clean/src/services/gmailService.ts:212:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async EmailMonitoringService.fallbackEmailCheck (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:272:28)\n    at async EmailMonitoringService.checkForNewEmails (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:259:9)\n    at async Timeout._onTimeout (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:83:9)","timestamp":"2025-08-20T22:59:14.094Z"}
{"code":"ENOTFOUND","config":{"headers":{"Accept-Encoding":"gzip","Authorization":"<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.","User-Agent":"google-api-nodejs-client/7.2.0 (gzip)","x-goog-api-client":"gdcl/7.2.0 gl-node/24.6.0"},"method":"GET","params":{"maxResults":15,"q":"after:2025/08/19"},"responseType":"unknown","retry":true,"retryConfig":{"currentRetryAttempt":2,"httpMethodsToRetry":["GET","HEAD","PUT","OPTIONS","DELETE"],"maxRetryDelay":9007199254740991,"noResponseRetries":2,"retry":3,"retryDelayMultiplier":2,"statusCodesToRetry":[[100,199],[408,408],[429,429],[500,599]],"timeOfFirstRequest":1755731835876,"totalTimeout":9007199254740991},"url":"https://gmail.googleapis.com/gmail/v1/users/me/messages?q=after%3A2025%2F08%2F19&maxResults=15","userAgentDirectives":[{"comment":"gzip","product":"google-api-nodejs-client","version":"7.2.0"}]},"error":{"code":"ENOTFOUND","errno":"ENOTFOUND","message":"request to https://gmail.googleapis.com/gmail/v1/users/me/messages?q=after%3A2025%2F08%2F19&maxResults=15 failed, reason: getaddrinfo ENOTFOUND gmail.googleapis.com","type":"system"},"level":"error","message":"Error listing recent emails: request to https://gmail.googleapis.com/gmail/v1/users/me/messages?q=after%3A2025%2F08%2F19&maxResults=15 failed, reason: getaddrinfo ENOTFOUND gmail.googleapis.com","stack":"Error: request to https://gmail.googleapis.com/gmail/v1/users/me/messages?q=after%3A2025%2F08%2F19&maxResults=15 failed, reason: getaddrinfo ENOTFOUND gmail.googleapis.com\n    at Gaxios._request (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/gaxios@6.7.1/node_modules/gaxios/src/gaxios.ts:157:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async OAuth2Client.requestAsync (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/google-auth-library@9.15.1/node_modules/google-auth-library/build/src/auth/oauth2client.js:429:18)\n    at async GmailService.listRecentEmails (/Users/alimazid/Claude/Penny/prototype-clean/src/services/gmailService.ts:193:24)\n    at async EmailMonitoringService.fallbackEmailCheck (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:272:28)\n    at async EmailMonitoringService.checkForNewEmails (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:259:9)\n    at async Timeout._onTimeout (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:83:9)","timestamp":"2025-08-20T23:17:16.490Z"}
{"level":"error","message":"Error in fallback email check: Failed to list recent emails","stack":"Error: Failed to list recent emails\n    at GmailService.listRecentEmails (/Users/alimazid/Claude/Penny/prototype-clean/src/services/gmailService.ts:212:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async EmailMonitoringService.fallbackEmailCheck (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:272:28)\n    at async EmailMonitoringService.checkForNewEmails (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:259:9)\n    at async Timeout._onTimeout (/Users/alimazid/Claude/Penny/prototype-clean/src/services/emailMonitoringService.ts:83:9)","timestamp":"2025-08-20T23:17:16.499Z"}
{"level":"error","message":"Email processing worker error: Missing lock for job 310. delayed","stack":"Error: Missing lock for job 310. delayed\n    at Scripts.finishedErrors (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/scripts.ts:435:16)\n    at Job.moveToFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/job.ts:686:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async handleFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:724:11)\n    at async Worker.retryIfFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:944:16)","timestamp":"2025-08-21T00:06:39.167Z"}
{"level":"error","message":"Database Error: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)","target":"extractedData.create","timestamp":"2025-08-21T00:23:32.506Z"}
{"clientVersion":"5.22.0","code":"P2002","level":"error","message":"Error processing extract job: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)","meta":{"modelName":"ExtractedData","target":["emailId"]},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)\n    at $n.handleRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async EmailProcessor.extractEmailData (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:7)\n    at async EmailProcessor.processJob (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:74:18)\n    at async Worker.processJob (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:741:22)\n    at async Worker.retryIfFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:944:16)","timestamp":"2025-08-21T00:23:32.510Z"}
{"clientVersion":"5.22.0","code":"P2002","level":"error","message":"Email processing job 310 failed: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)","meta":{"modelName":"ExtractedData","target":["emailId"]},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)\n    at $n.handleRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async EmailProcessor.extractEmailData (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:7)\n    at async EmailProcessor.processJob (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:74:18)\n    at async Worker.processJob (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:741:22)\n    at async Worker.retryIfFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:944:16)","timestamp":"2025-08-21T00:23:32.514Z"}
{"level":"error","message":"Database Error: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)","target":"extractedData.create","timestamp":"2025-08-21T00:38:32.319Z"}
{"clientVersion":"5.22.0","code":"P2002","level":"error","message":"Error processing extract job: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)","meta":{"modelName":"ExtractedData","target":["emailId"]},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)\n    at $n.handleRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async EmailProcessor.extractEmailData (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:7)\n    at async EmailProcessor.processJob (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:74:18)\n    at async Worker.processJob (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:741:22)\n    at async Worker.retryIfFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:944:16)","timestamp":"2025-08-21T00:38:32.325Z"}
{"clientVersion":"5.22.0","code":"P2002","level":"error","message":"Email processing job 310 failed: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)","meta":{"modelName":"ExtractedData","target":["emailId"]},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)\n    at $n.handleRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async EmailProcessor.extractEmailData (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:7)\n    at async EmailProcessor.processJob (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:74:18)\n    at async Worker.processJob (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:741:22)\n    at async Worker.retryIfFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:944:16)","timestamp":"2025-08-21T00:38:32.329Z"}
{"level":"error","message":"Email processing worker error: Missing lock for job 312. delayed","stack":"Error: Missing lock for job 312. delayed\n    at Scripts.finishedErrors (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/scripts.ts:435:16)\n    at Job.moveToFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/job.ts:686:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async handleFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:724:11)\n    at async Worker.retryIfFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:944:16)","timestamp":"2025-08-21T01:12:03.609Z"}
{"level":"error","message":"Database Error: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)","target":"extractedData.create","timestamp":"2025-08-21T01:29:15.977Z"}
{"clientVersion":"5.22.0","code":"P2002","level":"error","message":"Error processing extract job: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)","meta":{"modelName":"ExtractedData","target":["emailId"]},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)\n    at $n.handleRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async EmailProcessor.extractEmailData (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:7)\n    at async EmailProcessor.processJob (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:74:18)\n    at async Worker.processJob (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:741:22)\n    at async Worker.retryIfFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:944:16)","timestamp":"2025-08-21T01:29:15.983Z"}
{"clientVersion":"5.22.0","code":"P2002","level":"error","message":"Email processing job 312 failed: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)","meta":{"modelName":"ExtractedData","target":["emailId"]},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)\n    at $n.handleRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async EmailProcessor.extractEmailData (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:7)\n    at async EmailProcessor.processJob (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:74:18)\n    at async Worker.processJob (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:741:22)\n    at async Worker.retryIfFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:944:16)","timestamp":"2025-08-21T01:29:15.988Z"}
{"level":"error","message":"Database Error: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)","target":"extractedData.create","timestamp":"2025-08-21T01:39:32.322Z"}
{"clientVersion":"5.22.0","code":"P2002","level":"error","message":"Error processing extract job: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)","meta":{"modelName":"ExtractedData","target":["emailId"]},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)\n    at $n.handleRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async EmailProcessor.extractEmailData (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:7)\n    at async EmailProcessor.processJob (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:74:18)\n    at async Worker.processJob (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:741:22)\n    at async Worker.retryIfFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:944:16)","timestamp":"2025-08-21T01:39:32.332Z"}
{"clientVersion":"5.22.0","code":"P2002","level":"error","message":"Email processing job 312 failed: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)","meta":{"modelName":"ExtractedData","target":["emailId"]},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.extractedData.create()` invocation in\n/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:34\n\n  453 \n  454 // Store extraction results\n  455 // CRITICAL: For CREDIT_CARD emails, ALWAYS create extracted data record\n→ 456 await prisma.extractedData.create(\nUnique constraint failed on the fields: (`emailId`)\n    at $n.handleRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async EmailProcessor.extractEmailData (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:456:7)\n    at async EmailProcessor.processJob (/Users/alimazid/Claude/Penny/prototype-clean/src/workers/emailProcessor.ts:74:18)\n    at async Worker.processJob (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:741:22)\n    at async Worker.retryIfFailed (/Users/alimazid/Claude/Penny/prototype-clean/node_modules/.pnpm/bullmq@4.18.3/node_modules/bullmq/src/classes/worker.ts:944:16)","timestamp":"2025-08-21T01:39:32.339Z"}
